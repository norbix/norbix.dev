{{ define "main" }}
{{- $shouldShowComments := or (.Params.comments) (site.Params.comments) -}}

<main id="main">
    <article class="post-single">
        <header class="post-header">
            <h1 class="post-title">{{ .Title }}</h1>
            {{ partial "post_meta.html" . }}
        </header>

        <div class="post-content">
            {{ if .Params.ShowToc }}
            <nav class="table-of-contents">
                {{ .TableOfContents }}
            </nav>
            {{ end }}

            {{ .Content }}
        </div>

        <div class="post-subscribe">
            {{ partial "subscribe.html" . }}
        </div>

        {{ if $shouldShowComments }}
        <div class="post-comments">
            {{ partial "giscus.html" . }}
        </div>
        {{ end }}

        {{ partial "post_nav_links.html" . }}
    </article>
</main>
{{ end }}
