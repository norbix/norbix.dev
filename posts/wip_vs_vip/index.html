<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><script>(function(){const e=localStorage.getItem("theme"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;e==="dark"||!e&&t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),window.setTheme=function(e){localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark",e==="dark")}})()</script><title>WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing | norbix.dev
</title><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing | norbix.dev - The log of my journey through code & software systems architecture</title>
<meta name=keywords content="networking,load-balancing,F5,nginx,infrastructure,architecture"><meta name=description content="A clear explanation of the difference between Wide IP (WIP) and Virtual IP (VIP) in modern load balancing, using F5 and NGINX as real-world examples for high-SLA architectures."><meta name=author content><link rel=canonical href=https://norbix.dev/posts/wip_vs_vip/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://norbix.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://norbix.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://norbix.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://norbix.dev/apple-touch-icon.png><link rel=mask-icon href=https://norbix.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://norbix.dev/posts/wip_vs_vip/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=canonical href=https://norbix.dev/posts/wip_vs_vip/><meta property="og:title" content="WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing"><meta property="og:url" content="https://norbix.dev/posts/wip_vs_vip/"><meta property="og:image" content="https://norbix.dev/banner.jpg"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing"><meta name=twitter:image content="https://norbix.dev/banner.jpg"><script data-goatcounter=https://norbix.goatcounter.com/count async src=//gc.zgo.at/count.js></script><link rel=alternate type=application/rss+xml title="RSS Feed for norbix.dev" href=/index.xml><script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js defer></script><script>document.addEventListener("DOMContentLoaded",function(){window.mermaid&&(document.querySelectorAll("code.language-mermaid").forEach(function(e){var n=e.parentElement,t=document.createElement("div");t.className="mermaid",t.textContent=e.textContent,n.replaceWith(t)}),mermaid.initialize({startOnLoad:!0}))})</script><link href=https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js defer></script><meta property="og:title" content="WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing"><meta property="og:description" content="A clear explanation of the difference between Wide IP (WIP) and Virtual IP (VIP) in modern load balancing, using F5 and NGINX as real-world examples for high-SLA architectures."><meta property="og:type" content="article"><meta property="og:url" content="https://norbix.dev/posts/wip_vs_vip/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-26T10:00:00+02:00"><meta property="article:modified_time" content="2025-11-26T10:00:00+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing"><meta name=twitter:description content="A clear explanation of the difference between Wide IP (WIP) and Virtual IP (VIP) in modern load balancing, using F5 and NGINX as real-world examples for high-SLA architectures."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://norbix.dev/posts/"},{"@type":"ListItem","position":2,"name":"WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing","item":"https://norbix.dev/posts/wip_vs_vip/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing","name":"WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing","description":"A clear explanation of the difference between Wide IP (WIP) and Virtual IP (VIP) in modern load balancing, using F5 and NGINX as real-world examples for high-SLA architectures.","keywords":["networking","load-balancing","F5","nginx","infrastructure","architecture"],"articleBody":" WIP vs VIP in Load Balancing and Reverse Proxies: Understanding the Difference with F5 and NGINX In modern distributed systems, the reliability of network traffic is as important as the reliability of the application code itself. High-traffic SaaS, global APIs, and distributed microservices rely on load balancers and reverse proxies to deliver low latency, high availability, and fault-tolerant routing.\nTwo common concepts often confused in this space are WIP (Wide IP) and VIP (Virtual IP). Although both deal with traffic routing, they operate at different layers, solve different problems, and are used in very different places.\nThis article breaks down WIP vs VIP, explains where each belongs in the network stack, and illustrates both with practical examples using F5 BIG-IP GTM (DNS Load Balancing) and NGINX (L4/L7 Reverse Proxy).\nüß≠ What is a VIP (Virtual IP)? A VIP (Virtual IP) is an IP address that does not belong to a single physical server but instead represents a load-balanced endpoint. Clients send traffic to this virtual address, and the load balancer (L4 or L7) routes it to the appropriate backend instance.\nVIPs operate within a local traffic context ‚Äî typically inside a data center, Kubernetes cluster, VPC, availability zone, or cloud environment.\n‚úî Key Characteristics of a VIP Lives inside a local network (data center, VPC, Kubernetes node network)\nBacked by one or more real servers / pods / nodes\nAssigned to a reverse proxy / L4 or L7 load balancer\nDoes not involve DNS-level traffic steering\nHandles high throughput and low latency traffic routing\nUsually tied to services that must be highly available within a region or network\n‚úî Example: NGINX VIP When NGINX or NGINX Plus is used as a load balancer, you commonly configure something like:\n1 2 3 4 5 6 7 8 9 10 11 12 13 upstream api_backend { server 10.0.1.11; server 10.0.1.12; server 10.0.1.13; } server { listen 443; server_name api.internal.local; location / { proxy_pass http://api_backend; } } Here:\nThe reverse proxy exposes a VIP (e.g., 10.0.10.50)\nRequests to that VIP are distributed to real servers\nFailures are handled internally by NGINX\nThis ensures high SLA inside the local environment\nA VIP ensures service availability, consistent performance, and load balancing ‚Äî but only within a single logical location.\nIn short:\nVIP = Layer 4/7 local load balancing of traffic to backend servers.\nüó∫Ô∏è What is a WIP (Wide IP)? A WIP (Wide IP) is a much broader concept, used in Global Traffic Management (GTM). A Wide IP is a DNS-level construct that maps a domain name to multiple possible data centers, regions, or global endpoints, based on real-time health and load information.\nWIP operates at a global level ‚Äî across geographic regions, clouds, or HA data centers.\n‚úî Key Characteristics of a WIP Part of a Global Server Load Balancing (GSLB) system\nSits at the DNS layer, not at L4 or L7\nRoutes clients to the nearest / healthiest region\nCan steer traffic globally based on:\nlatency\ngeolocation\nhealth checks\nload / capacity\nactive-active or active-passive failover\nUsed for global apps, multi-region SaaS, disaster recovery\nDoes not itself forward HTTP/TCP packets ‚Äî it returns DNS answers\n‚úî Example: F5 DNS (GTM) WIP F5 BIG-IP DNS (formerly GTM) can define:\nA WIP: api.example.com\nMultiple ‚Äúpools‚Äù: e.g., EU region, US region, APAC region\nEach pool has multiple VIPs (local data center load balancers)\nA possible configuration:\n1 2 3 4 5 6 7 8 9 10 11 12 13 WIP: api.example.com | ‚îú‚îÄ Pool: us-region | ‚îú‚îÄ VIP: 34.22.11.90 (AWS NLB) | ‚îî‚îÄ VIP: 34.22.11.91 (GCP Load Balancer) | ‚îú‚îÄ Pool: eu-region | ‚îú‚îÄ VIP: 52.31.19.80 | ‚îî‚îÄ VIP: 52.31.19.81 | ‚îî‚îÄ Pool: apac-region ‚îú‚îÄ VIP: 99.22.10.80 ‚îî‚îÄ VIP: 99.22.10.81 When a client resolves api.example.com, the WIP decides which region‚Äôs VIP should be returned.\nThe WIP does global DNS-level routing. The VIP handles local load balancing for the chosen region.\nüåç How CNAME Records Enable Geolocation-Based Routing in GSLB (WIP) Global traffic steering ‚Äî especially using F5 BIG-IP DNS (GTM) or similar GSLB systems ‚Äî often relies on CNAME records to route users dynamically based on geography, health, and latency.\n‚úî What is a CNAME Record? A CNAME (Canonical Name) record maps one DNS name to another DNS name.\n1 api.example.com ‚Üí cname us.api.global.lb.example.net Unlike an A/AAAA record, a CNAME does not return an IP address.\nInstead, it refers the client to another hostname, whose DNS resolver then returns the final IP (usually a VIP).\n‚úî How CNAME Helps in Geolocation-Based Routing GSLB systems like F5 GTM use CNAMEs because they allow dynamic redirection without exposing all logic to the client.\nHere‚Äôs how it works:\nClient requests DNS for:\n1 api.example.com The WIP (Wide IP) evaluates:\nclient‚Äôs geolocation (based on resolver IP)\nregion latency\nsite health\ncapacity/load\ndisaster recovery rules\nWIP chooses the best region and returns a region-specific CNAME:\nExamples:\n1 2 3 api.example.com ‚Üí eu.api.global.lb.example.net api.example.com ‚Üí us.api.global.lb.example.net api.example.com ‚Üí apac.api.global.lb.example.net The client then resolves the target hostname to the local VIP of that region:\n1 2 eu.api.global.lb.example.net ‚Üí 52.31.19.80 (EU VIP) us.api.global.lb.example.net ‚Üí 34.22.11.91 (US VIP) ‚úî Why CNAME Is Critical for Load Balancing + Geolocation Allows Global Routing Decisions Without Changing Client URLs\nYou keep a single customer-facing domain (api.example.com) but dynamically route traffic worldwide.\nKeeps DNS TTLs Short and Flexible\nGSLB systems can return CNAMEs with low TTLs (e.g., 30 seconds), allowing:\ninstant failover\ntraffic draining\nregional maintenance windows\nload shifting\ndisaster recovery cutovers\nDecouples Global Routing From Local VIPs\nRegions can update or rotate VIPs internally (due to deployments or scaling) without affecting global DNS.\nGeolocation Accuracy\nWIP uses the DNS resolver‚Äôs IP to infer the client‚Äôs region.\nTherefore:\nPL / DE / NL users may be steered to EU region\nUS East / US West goes to US region\nSG / PH / AU goes to APAC region\nThe CNAME indirection makes this possible cleanly.\n‚úî Example: Full WIP ‚Üí CNAME ‚Üí VIP Flow 1 2 3 4 5 6 Client ‚Üí DNS Query (api.example.com) ‚Üí WIP decision (glb) ‚Üí CNAME selected: eu.api.glb.example.net ‚Üí Regional DNS resolves VIP ‚Üí VIP ‚Üí local LB (NGINX, Envoy, HAProxy) ‚Üí Backend services / pods / nodes This chain combines:\nLayer Responsibility\" WIP (CNAME) Global geolocation routing Regional DNS Returns VIP for chosen region VIP Local L4/L7 load balancing Upstream servers Actual application logic ‚úî Real-World Example: Multi-Region SaaS DNS WIP returns:\n1 2 3 api.product.com ‚Üí cname us.api.app.prod.example.net (for US users) api.product.com ‚Üí cname eu.api.app.prod.example.net (for EU users) api.product.com ‚Üí cname ap.api.app.prod.example.net (for APAC users) Each of those CNAMES resolves to region-specific VIPs:\n1 2 3 us.api.app.prod.example.net ‚Üí 34.22.11.90 eu.api.app.prod.example.net ‚Üí 52.31.19.80 ap.api.app.prod.example.net ‚Üí 99.22.10.81 This is geolocation-based routing powered by CNAME indirection.\nSummary of CNAME Benefits in WIP CNAME records are a core mechanism for implementing geolocation routing in WIP/GSLB architectures. They allow the global DNS load balancer (WIP) to return region-specific hostnames that then resolve to local VIPs, enabling:\nglobal failover\ngeolocation-based routing\nfast health-aware DNS steering\nclean separation of global and regional concerns\nzero changes to the client-visible domain\nIn short:\n1 2 3 WIP ‚Üí returns best CNAME for region CNAME ‚Üí resolves to regional VIP VIP ‚Üí distributes traffic locally Together, this forms a globally available, low-latency, multi-region architecture.\n‚öñÔ∏è WIP vs VIP: What‚Äôs the Difference? Feature WIP (Wide IP) VIP (Virtual IP) Layer DNS (Layer 0) Network/Transport/Application (L4/L7) Purpose Route globally between regions Balance traffic locally inside a region Example F5 BIG-IP DNS / GTM NGINX, HAProxy, Envoy Redirect Type DNS answer selection TCP/HTTP forwarding Health Checks Regional / data center Individual nodes/pods Typical Use Case Multi-region SaaS, DR Service load balancing SLA Impact Multi-region availability Intra-region availability In plain terms:\nVIP: balances traffic between servers inside one region or cluster\nWIP: balances traffic between regions or between VIPs\nBoth contribute to overall SLA, but at different layers of your architecture.\nüîê How WIP + VIP Work Together for High SLA A modern globally resilient architecture often uses this pattern:\nGlobal Availability (WIP with F5 GTM)\nChecks health of entire regions\nFails over between EU/US/APAC\nApplies geolocation routing for latency reduction\nLocal High Availability (VIP with NGINX or LB)\nBalances traffic between replica pods / nodes\nAutomatically removes unhealthy instances\nProvides L7 routing logic (path, headers, rate limits)\nCombined, they create a multi-layer failover strategy:\n1 Client ‚Üí DNS (WIP) ‚Üí Regional VIP ‚Üí Local Services This ensures:\nGlobal failover (if EU goes down ‚Üí steer to US)\nLocal failover (if one pod crashes ‚Üí remove it instantly)\nHigh availability across the entire stack\nThis is the foundation for SLA targets like 99.9% (three-nines) or higher.\nüöÄ Summary WIP (Wide IP) and VIP (Virtual IP) solve different parts of the traffic-routing problem:\nWIP = DNS-level global traffic steering (F5 GTM)\nVIP = L4/L7 local load balancing (NGINX)\nUsing both creates a powerful, multi-layered reliability strategy for modern SaaS and distributed systems.\nIf you operate multi-cloud or multi-region platforms ‚Äî especially those requiring near-continuous availability ‚Äî then WIP + VIP together is essential tooling for delivering a high-SLA network architecture.\nüöÄ Follow me on norbix.dev for more insights on Go, Python, AI, system design, and engineering wisdom.\n","wordCount":"1520","inLanguage":"en","datePublished":"2025-11-26T10:00:00+02:00","dateModified":"2025-11-26T10:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://norbix.dev/posts/wip_vs_vip/"},"publisher":{"@type":"Organization","name":"norbix.dev - The log of my journey through code \u0026 software systems architecture","logo":{"@type":"ImageObject","url":"https://norbix.dev/favicon.ico"}}}</script></head><body><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://norbix.dev/ accesskey=h title="norbix.dev - The log of my journey through code & software systems architecture (Alt + H)">norbix.dev - The log of my journey through code & software systems architecture</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://norbix.dev/ title=Home><span>Home</span></a></li><li><a href=https://norbix.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://norbix.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://norbix.dev/about/ title=About><span>About</span></a></li><li><a href=https://norbix.dev/index.xml title="üì° RSS"><span>üì° RSS</span></a></li></ul></nav></header><main><main id=main><article class=post-single><header class=post-header><h1 class=post-title>WIP vs VIP in Load Balancing: Understanding Global vs Local Traffic Routing</h1><span title='2025-11-26 10:00:00 +0200 +0200'>November 26, 2025</span></header><div class=post-content><nav class=table-of-contents><nav id=TableOfContents><ul><li><a href=#-what-is-a-vip-virtual-ip>üß≠ What is a VIP (Virtual IP)?</a><ul><li><a href=#-key-characteristics-of-a-vip>‚úî Key Characteristics of a VIP</a></li><li><a href=#-example-nginx-vip>‚úî Example: NGINX VIP</a></li></ul></li><li><a href=#-what-is-a-wip-wide-ip>üó∫Ô∏è What is a WIP (Wide IP)?</a><ul><li><a href=#-key-characteristics-of-a-wip>‚úî Key Characteristics of a WIP</a></li><li><a href=#-example-f5-dns-gtm-wip>‚úî Example: F5 DNS (GTM) WIP</a></li></ul></li><li><a href=#-how-cname-records-enable-geolocation-based-routing-in-gslb-wip>üåç How CNAME Records Enable Geolocation-Based Routing in GSLB (WIP)</a><ul><li><a href=#-what-is-a-cname-record>‚úî What is a CNAME Record?</a></li><li><a href=#-how-cname-helps-in-geolocation-based-routing>‚úî How CNAME Helps in Geolocation-Based Routing</a></li></ul></li><li><a href=#-why-cname-is-critical-for-load-balancing--geolocation>‚úî Why CNAME Is Critical for Load Balancing + Geolocation</a><ul><li><a href=#-example-full-wip--cname--vip-flow>‚úî Example: Full WIP ‚Üí CNAME ‚Üí VIP Flow</a></li><li><a href=#-real-world-example-multi-region-saas>‚úî Real-World Example: Multi-Region SaaS</a></li><li><a href=#summary-of-cname-benefits-in-wip>Summary of CNAME Benefits in WIP</a></li></ul></li><li><a href=#-wip-vs-vip-whats-the-difference>‚öñÔ∏è WIP vs VIP: What‚Äôs the Difference?</a></li><li><a href=#-how-wip--vip-work-together-for-high-sla>üîê How <code>WIP</code> + <code>VIP</code> Work Together for High SLA</a></li><li><a href=#-summary>üöÄ Summary</a></li></ul></nav></nav><p><img loading=lazy src=banner.jpg alt=banner></p><h1 id=wip-vs-vip-in-load-balancing-and-reverse-proxies-understanding-the-difference-with-f5-and-nginx>WIP vs VIP in Load Balancing and Reverse Proxies: Understanding the Difference with F5 and NGINX</h1><p>In modern distributed systems, the reliability of network traffic is as important as the reliability of the application code itself. High-traffic SaaS, global APIs, and distributed microservices rely on load balancers and reverse proxies to deliver low latency, high availability, and fault-tolerant routing.</p><p>Two common concepts often confused in this space are WIP (Wide IP) and VIP (Virtual IP). Although both deal with traffic routing, they operate at different layers, solve different problems, and are used in very different places.</p><p>This article breaks down <code>WIP</code> vs <code>VIP</code>, explains where each belongs in the network stack, and illustrates both with practical examples using F5 BIG-IP GTM (DNS Load Balancing) and NGINX (L4/L7 Reverse Proxy).</p><hr><h2 id=-what-is-a-vip-virtual-ip>üß≠ What is a VIP (Virtual IP)?</h2><p>A VIP (Virtual IP) is an IP address that does not belong to a single physical server but instead represents a load-balanced endpoint. Clients send traffic to this virtual address, and the load balancer (L4 or L7) routes it to the appropriate backend instance.</p><p>VIPs operate within a local traffic context ‚Äî typically inside a data center, Kubernetes cluster, VPC, availability zone, or cloud environment.</p><h3 id=-key-characteristics-of-a-vip>‚úî Key Characteristics of a VIP</h3><ul><li><p>Lives inside a local network (data center, VPC, Kubernetes node network)</p></li><li><p>Backed by one or more real servers / pods / nodes</p></li><li><p>Assigned to a reverse proxy / L4 or L7 load balancer</p></li><li><p>Does not involve DNS-level traffic steering</p></li><li><p>Handles high throughput and low latency traffic routing</p></li><li><p>Usually tied to services that must be highly available within a region or network</p></li></ul><h3 id=-example-nginx-vip>‚úî Example: NGINX VIP</h3><p>When NGINX or NGINX Plus is used as a load balancer, you commonly configure something like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>upstream</span> <span class=s>api_backend</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=mi>10</span><span class=s>.0.1.11</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=mi>10</span><span class=s>.0.1.12</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=mi>10</span><span class=s>.0.1.13</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span> <span class=mi>443</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server_name</span> <span class=s>api.internal.local</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_pass</span> <span class=s>http://api_backend</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Here:</p><ul><li><p>The reverse proxy exposes a VIP (e.g., 10.0.10.50)</p></li><li><p>Requests to that VIP are distributed to real servers</p></li><li><p>Failures are handled internally by NGINX</p></li><li><p>This ensures high SLA inside the local environment</p></li></ul><p>A VIP ensures service availability, consistent performance, and load balancing ‚Äî but only within a single logical location.</p><p>In short:</p><p><strong>VIP = Layer 4/7 local load balancing of traffic to backend servers.</strong></p><h2 id=-what-is-a-wip-wide-ip>üó∫Ô∏è What is a WIP (Wide IP)?</h2><p>A WIP (Wide IP) is a much broader concept, used in Global Traffic Management (GTM).
A Wide IP is a DNS-level construct that maps a domain name to multiple possible data centers, regions, or global endpoints, based on real-time health and load information.</p><p>WIP operates at a global level ‚Äî across geographic regions, clouds, or HA data centers.</p><h3 id=-key-characteristics-of-a-wip>‚úî Key Characteristics of a WIP</h3><ul><li><p>Part of a Global Server Load Balancing (GSLB) system</p></li><li><p>Sits at the DNS layer, not at L4 or L7</p></li><li><p>Routes clients to the nearest / healthiest region</p></li><li><p>Can steer traffic globally based on:</p><ul><li><p>latency</p></li><li><p>geolocation</p></li><li><p>health checks</p></li><li><p>load / capacity</p></li><li><p>active-active or active-passive failover</p></li></ul></li><li><p>Used for global apps, multi-region SaaS, disaster recovery</p></li><li><p>Does not itself forward HTTP/TCP packets ‚Äî it returns DNS answers</p></li></ul><h3 id=-example-f5-dns-gtm-wip>‚úî Example: F5 DNS (GTM) WIP</h3><p>F5 BIG-IP DNS (formerly GTM) can define:</p><ul><li><p>A WIP: api.example.com</p></li><li><p>Multiple &ldquo;pools&rdquo;: e.g., EU region, US region, APAC region</p></li><li><p>Each pool has multiple VIPs (local data center load balancers)</p></li></ul><p>A possible configuration:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>WIP</span><span class=p>:</span><span class=w> </span><span class=l>api.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd> ‚îú‚îÄ Pool: us-region
</span></span></span><span class=line><span class=cl><span class=sd> |     ‚îú‚îÄ VIP: 34.22.11.90 (AWS NLB)
</span></span></span><span class=line><span class=cl><span class=sd> |     ‚îî‚îÄ VIP: 34.22.11.91 (GCP Load Balancer)
</span></span></span><span class=line><span class=cl><span class=sd> |
</span></span></span><span class=line><span class=cl><span class=sd> ‚îú‚îÄ Pool: eu-region
</span></span></span><span class=line><span class=cl><span class=sd> |     ‚îú‚îÄ VIP: 52.31.19.80
</span></span></span><span class=line><span class=cl><span class=sd> |     ‚îî‚îÄ VIP: 52.31.19.81
</span></span></span><span class=line><span class=cl><span class=sd> |
</span></span></span><span class=line><span class=cl><span class=sd> ‚îî‚îÄ Pool: apac-region
</span></span></span><span class=line><span class=cl><span class=sd>       ‚îú‚îÄ VIP: 99.22.10.80
</span></span></span><span class=line><span class=cl><span class=sd>       ‚îî‚îÄ VIP: 99.22.10.81</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>When a client resolves api.example.com, the WIP decides which region‚Äôs VIP should be returned.</p><p>The WIP does global DNS-level routing.
The VIP handles local load balancing for the chosen region.</p><h2 id=-how-cname-records-enable-geolocation-based-routing-in-gslb-wip>üåç How CNAME Records Enable Geolocation-Based Routing in GSLB (WIP)</h2><p>Global traffic steering ‚Äî especially using F5 BIG-IP DNS (GTM) or similar GSLB systems ‚Äî often relies on CNAME records to route users dynamically based on geography, health, and latency.</p><h3 id=-what-is-a-cname-record>‚úî What is a CNAME Record?</h3><p>A CNAME (Canonical Name) record maps one DNS name to another DNS name.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>api.example.com  ‚Üí  cname us.api.global.lb.example.net
</span></span></code></pre></td></tr></table></div></div><p>Unlike an A/AAAA record, a CNAME does not return an IP address.</p><p>Instead, it refers the client to another hostname, whose DNS resolver then returns the final IP (usually a VIP).</p><h3 id=-how-cname-helps-in-geolocation-based-routing>‚úî How CNAME Helps in Geolocation-Based Routing</h3><p>GSLB systems like F5 GTM use CNAMEs because they allow dynamic redirection without exposing all logic to the client.</p><p>Here‚Äôs how it works:</p><ol><li><p>Client requests DNS for:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>api.example.com
</span></span></code></pre></td></tr></table></div></div></li><li><p>The WIP (Wide IP) evaluates:</p><ul><li><p>client‚Äôs geolocation (based on resolver IP)</p></li><li><p>region latency</p></li><li><p>site health</p></li><li><p>capacity/load</p></li><li><p>disaster recovery rules</p></li></ul></li><li><p>WIP chooses the best region and returns a region-specific CNAME:</p><p>Examples:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>api.example.com ‚Üí eu.api.global.lb.example.net
</span></span><span class=line><span class=cl>api.example.com ‚Üí us.api.global.lb.example.net
</span></span><span class=line><span class=cl>api.example.com ‚Üí apac.api.global.lb.example.net
</span></span></code></pre></td></tr></table></div></div></li><li><p>The client then resolves the target hostname to the local VIP of that region:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>eu.api.global.lb.example.net ‚Üí 52.31.19.80 (EU VIP)
</span></span><span class=line><span class=cl>us.api.global.lb.example.net ‚Üí 34.22.11.91 (US VIP)
</span></span></code></pre></td></tr></table></div></div></li></ol><h2 id=-why-cname-is-critical-for-load-balancing--geolocation>‚úî Why CNAME Is Critical for Load Balancing + Geolocation</h2><ol><li><p>Allows Global Routing Decisions Without Changing Client URLs</p><p>You keep a single customer-facing domain (api.example.com)
but dynamically route traffic worldwide.</p></li><li><p>Keeps DNS TTLs Short and Flexible</p><p>GSLB systems can return CNAMEs with low TTLs (e.g., 30 seconds), allowing:</p><ul><li><p>instant failover</p></li><li><p>traffic draining</p></li><li><p>regional maintenance windows</p></li><li><p>load shifting</p></li><li><p>disaster recovery cutovers</p></li></ul></li><li><p>Decouples Global Routing From Local VIPs</p><p>Regions can update or rotate VIPs internally (due to deployments or scaling) without affecting global DNS.</p></li><li><p>Geolocation Accuracy</p><p>WIP uses the DNS resolver‚Äôs IP to infer the client‚Äôs region.</p><p>Therefore:</p><ul><li><p>PL / DE / NL users may be steered to EU region</p></li><li><p>US East / US West goes to US region</p></li><li><p>SG / PH / AU goes to APAC region</p></li></ul><p>The CNAME indirection makes this possible cleanly.</p></li></ol><h3 id=-example-full-wip--cname--vip-flow>‚úî Example: Full WIP ‚Üí CNAME ‚Üí VIP Flow</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Client ‚Üí DNS Query (api.example.com)
</span></span><span class=line><span class=cl>      ‚Üí WIP decision (glb)
</span></span><span class=line><span class=cl>      ‚Üí CNAME selected: eu.api.glb.example.net
</span></span><span class=line><span class=cl>      ‚Üí Regional DNS resolves VIP
</span></span><span class=line><span class=cl>      ‚Üí VIP ‚Üí local LB (NGINX, Envoy, HAProxy)
</span></span><span class=line><span class=cl>      ‚Üí Backend services / pods / nodes
</span></span></code></pre></td></tr></table></div></div><p>This chain combines:</p><table><thead><tr><th>Layer</th><th>Responsibility"</th></tr></thead><tbody><tr><td>WIP (CNAME)</td><td>Global geolocation routing</td></tr><tr><td>Regional DNS</td><td>Returns VIP for chosen region</td></tr><tr><td>VIP</td><td>Local L4/L7 load balancing</td></tr><tr><td>Upstream servers</td><td>Actual application logic</td></tr></tbody></table><h3 id=-real-world-example-multi-region-saas>‚úî Real-World Example: Multi-Region SaaS</h3><p>DNS WIP returns:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>api.product.com ‚Üí cname us.api.app.prod.example.net    (for US users)
</span></span><span class=line><span class=cl>api.product.com ‚Üí cname eu.api.app.prod.example.net    (for EU users)
</span></span><span class=line><span class=cl>api.product.com ‚Üí cname ap.api.app.prod.example.net    (for APAC users)
</span></span></code></pre></td></tr></table></div></div><p>Each of those CNAMES resolves to region-specific VIPs:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>us.api.app.prod.example.net ‚Üí 34.22.11.90
</span></span><span class=line><span class=cl>eu.api.app.prod.example.net ‚Üí 52.31.19.80
</span></span><span class=line><span class=cl>ap.api.app.prod.example.net ‚Üí 99.22.10.81
</span></span></code></pre></td></tr></table></div></div><p>This is geolocation-based routing powered by CNAME indirection.</p><h3 id=summary-of-cname-benefits-in-wip>Summary of CNAME Benefits in WIP</h3><p>CNAME records are a core mechanism for implementing geolocation routing in WIP/GSLB architectures.
They allow the global DNS load balancer (WIP) to return region-specific hostnames that then resolve to local VIPs, enabling:</p><ul><li><p>global failover</p></li><li><p>geolocation-based routing</p></li><li><p>fast health-aware DNS steering</p></li><li><p>clean separation of global and regional concerns</p></li><li><p>zero changes to the client-visible domain</p></li></ul><p>In short:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>WIP ‚Üí returns best CNAME for region  
</span></span><span class=line><span class=cl>CNAME ‚Üí resolves to regional VIP  
</span></span><span class=line><span class=cl>VIP ‚Üí distributes traffic locally
</span></span></code></pre></td></tr></table></div></div><p>Together, this forms a globally available, low-latency, multi-region architecture.</p><h2 id=-wip-vs-vip-whats-the-difference>‚öñÔ∏è WIP vs VIP: What‚Äôs the Difference?</h2><table><thead><tr><th>Feature</th><th>WIP (Wide IP)</th><th>VIP (Virtual IP)</th></tr></thead><tbody><tr><td>Layer</td><td>DNS (Layer 0)</td><td>Network/Transport/Application (L4/L7)</td></tr><tr><td>Purpose</td><td>Route globally between regions</td><td>Balance traffic locally inside a region</td></tr><tr><td>Example</td><td>F5 BIG-IP DNS / GTM</td><td>NGINX, HAProxy, Envoy</td></tr><tr><td>Redirect Type</td><td>DNS answer selection</td><td>TCP/HTTP forwarding</td></tr><tr><td>Health Checks</td><td>Regional / data center</td><td>Individual nodes/pods</td></tr><tr><td>Typical Use Case</td><td>Multi-region SaaS, DR</td><td>Service load balancing</td></tr><tr><td>SLA Impact</td><td>Multi-region availability</td><td>Intra-region availability</td></tr></tbody></table><p>In plain terms:</p><ul><li><p><code>VIP</code>: balances traffic between servers inside one region or cluster</p></li><li><p><code>WIP</code>: balances traffic between regions or between VIPs</p></li></ul><p>Both contribute to overall SLA, but at different layers of your architecture.</p><h2 id=-how-wip--vip-work-together-for-high-sla>üîê How <code>WIP</code> + <code>VIP</code> Work Together for High SLA</h2><p>A modern globally resilient architecture often uses this pattern:</p><ol><li><p>Global Availability (WIP with F5 GTM)</p><ul><li><p>Checks health of entire regions</p></li><li><p>Fails over between EU/US/APAC</p></li><li><p>Applies geolocation routing for latency reduction</p></li></ul></li><li><p>Local High Availability (VIP with NGINX or LB)</p><ul><li><p>Balances traffic between replica pods / nodes</p></li><li><p>Automatically removes unhealthy instances</p></li><li><p>Provides L7 routing logic (path, headers, rate limits)</p></li><li><p>Combined, they create a multi-layer failover strategy:</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Client ‚Üí DNS (WIP) ‚Üí Regional VIP ‚Üí Local Services
</span></span></code></pre></td></tr></table></div></div><p>This ensures:</p><ul><li><p>Global failover (if EU goes down ‚Üí steer to US)</p></li><li><p>Local failover (if one pod crashes ‚Üí remove it instantly)</p></li><li><p>High availability across the entire stack</p></li><li><p>This is the foundation for SLA targets like 99.9% (three-nines) or higher.</p></li></ul></li></ol><h2 id=-summary>üöÄ Summary</h2><p><code>WIP</code> (Wide IP) and VIP (Virtual IP) solve different parts of the traffic-routing problem:</p><p><code>WIP</code> = DNS-level global traffic steering (F5 GTM)</p><p><code>VIP</code> = L4/L7 local load balancing (NGINX)</p><p>Using both creates a powerful, multi-layered reliability strategy for modern SaaS and distributed systems.</p><p>If you operate multi-cloud or multi-region platforms ‚Äî especially those requiring near-continuous availability ‚Äî then WIP + VIP together is essential tooling for delivering a high-SLA network architecture.</p><hr><p>üöÄ Follow me on <a href=https://norbix.dev>norbix.dev</a> for more insights on Go, Python, AI, system design, and engineering wisdom.</p></div><div class=post-subscribe><style>.subscribe-form{display:flex;gap:.5rem;margin-top:1rem;align-items:center}.subscribe-form input[type=email]{padding:.5rem;border-radius:6px;border:1px solid #ccc;background-color:#1f1f1f;color:#fff}.subscribe-form input[type=submit],.subscribe-form button{padding:.5rem 1rem;border-radius:6px;background-color:#facc15;color:#000;border:none;cursor:pointer;font-weight:700}.subscribe-form input[type=submit]:hover{background-color:#fcd34d}</style><form action=https://buttondown.email/api/emails/embed-subscribe/norbix method=post target=popupwindow onsubmit='window.open("https://buttondown.email/norbix","popupwindow")' class=subscribe-form><input type=email name=email placeholder="Enter your email" required>
<input type=submit value=Subscribe></form><p style=font-size:.875rem;opacity:.6>Powered by Buttondown.</p></div><div class=post-comments><script src=https://giscus.app/client.js data-repo=norbix/norbix.dev data-repo-id=R_kgDOOV_xMQ data-category=Announcements data-category-id=DIC_kwDOOV_xMc4CpF5M data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=dark data-lang=en crossorigin=anonymous async></script></div><nav class=paginav><a class=prev href=https://norbix.dev/posts/sbom/><span class=title>¬´ Prev</span><br><span>SBOM Generation for Security and Compliance</span>
</a><a class=next href=https://norbix.dev/posts/testing/><span class=title>Next ¬ª</span><br><span>Testing Strategy in Modern DevOps</span></a></nav></article></main></main><footer class=footer><span>&copy; 2026 <a href=https://norbix.dev/>norbix.dev - The log of my journey through code & software systems architecture</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script src=https://platform.linkedin.com/badges/js/profile.js async defer type=text/javascript></script></body></html>